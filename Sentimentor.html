<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./Sentimentor.css">
</head>
<body>
    <h1 id ="header">Detect Your Text Expressions</h1>
        <span id = "outputDesign">
             <textarea  id = "input" rows="7" cols="10" placeholder = "Enter your text here..."></textarea>
        </span>    
        <span id = "buttonDesign">
            <button id = "button" onclick = "checkAttitude()"> Check</button>
        </span>
        <span id = "resultDesign">
             <div id ="result"></div>
        </span>

    <script>

        async function checkAttitude() {
            const answerZone = document.getElementById("result");
            answerZone.innerText = "LOADING...."
            const text = document.getElementById("input");
            console.log (text.value);
            try {
                
                const response = await fetch("https://sentim-api.herokuapp.com/api/v1/", { 
                    headers: {"Accept": "application/json", "Content-Type": "application/json"},
                    body : JSON.stringify({ "text": text.value  }),
                    method : "POST"
                    }
                    );
  
                    const result = (await response.json());
                    
                    answerZone.innerText = "This text expresses " + result.result.type + " emotions. " + "Polarity: " + result.result.polarity;
                    console.log(result.result.type);
                    answerZone.style.color = "grey";
                    if (result.result.type == "negative"){
                        answerZone.style.color = "red";
                    }
                    if (result.result.type == "positive"){
                        answerZone.style.color = "greenyellow";
                    }
                    // else {
                    //     answerZone.style.color = "grey";
                    // }
                    console.log(result.result);
                    console.log(response);
            } catch (error) {
                answerZone.innerText = "Please enter valide text"
            }
            
        } 
    </script>
</body>
</html>